# Домашнее задание к занятию 1. «Типы и структура СУБД»

## Введение

Перед выполнением задания вы можете ознакомиться с
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/virt-11/additional).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

Ответ:

- электронные чеки в json-виде - Документоориентированная БД - MongoDB, MarkLogic, CouchDB - такие базы данных предусматривают хранение документов и связей между ними
- склады и автомобильные дороги для логистической компании - Графовая БД - Neo4j, DGraph - такие базы данных предусматривают связи ввиде графов, в данном случае граф - это склад, а ребро - дорога
- генеалогические деревья - Сетевые БД - такие базы данных предусматривают возможность работать с иерархией, например, у дочернего элемента может быть более одного родителя
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации - Key-value БД -  Redis, Memcached - Обычный кеш с временным хранением данных
- отношения клиент-покупка для интернет-магазина - Реляционная БД - Postgres, OracleDB - возможность иметь отшения между таблицами

## Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

Ответ по CAP-теореме:

    - Данные записываются на все узлы с задержкой до часа (асинхронная запись)
        AP, так как не гарантирует целостность, но обеспечивает доступность и возможность записи в асинхронном режиме

    - При сетевых сбоях, система может разделиться на 2 раздельных кластера
        CA, так как всегда целостна и имеет дубли данных на всех узлах

    - Система может не прислать корректный ответ или сбросить соединение
       CP, так как стремиться обеспечить целостность данных в ущерб доступности, может сбросить соединение при отсутствии согласованности данных в кластере

Ответ по PACELC-теореме:

    - Данные записываются на все узлы с задержкой до часа (асинхронная запись)
        PA/EC, так как в этой архитектуре при наличии сетевого разделения системы ставка должна делаться на доступность, а при отсутствии распределения – на консистентность


    - При сетевых сбоях, система может разделиться на 2 раздельных кластера
        PC/EL, так как при необходимости разделения система должна быть максимально консистентной

    - Система может не прислать корректный ответ или сбросить соединение
        PC/EC, так как при разделенности будет жертвовать доступностью, именно по этому возможен сброс соединения

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Ответ:

Не могут. ACID главное требование согласованность данных, а BASE главное быстрый ответ в ущерб точности ответов.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub.
Что это за система? Какие минусы выбора этой системы?

Ответ:
Redis

- Ресурсозатраный (RAM). Хранит все данные в оперативной памяти, и при аварийном завершении процесса или выключении машины данные будут потеряны

- Не имеет функций автоматической отказоустойчивости и восстановления

---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---

